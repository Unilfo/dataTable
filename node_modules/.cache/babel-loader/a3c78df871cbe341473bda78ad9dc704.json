{"ast":null,"code":"var _jsxFileName = \"F:\\\\Application\\\\dataTable\\\\data-table\\\\src\\\\components\\\\app\\\\app.js\";\nimport React, { Component } from 'react';\nimport DataTable from 'react-data-table-component';\nimport Button from 'react-bootstrap/Button';\nimport FormControl from 'react-bootstrap/FormControl';\nimport ModalRowAdd from '../modal-row-add/modal-row-add';\nlet id_count = 5;\nexport default class MyComponent extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [{\n        id: 1,\n        title: 'Conan the Barbarian1',\n        year: '1981'\n      }, {\n        id: 2,\n        title: 'Conan the Barbarian2',\n        year: '1982'\n      }, {\n        id: 3,\n        title: 'Conan the Barbarian3',\n        year: '1983'\n      }, {\n        id: 4,\n        title: 'Привет как дела',\n        year: 'vvvv'\n      }],\n      columns: [{\n        name: 'Title',\n        selector: 'title',\n        sortable: true\n      }, {\n        name: 'Year',\n        selector: 'year',\n        sortable: true,\n        right: true\n      }, {\n        name: 'buttons',\n        id: 'edit',\n        cell: ({\n          id\n        }) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n          className: \"mr-2\",\n          onClick: () => this.edit(id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 25\n          }\n        }, \"edit\"), /*#__PURE__*/React.createElement(Button, {\n          onClick: () => this.del(id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 25\n          }\n        }, \"del\"))\n      }],\n      tern: '',\n      show: false,\n      itemModal: {}\n    };\n\n    this.openMod = () => {\n      this.setState({\n        show: true,\n        itemModal: {\n          id: '',\n          title: '',\n          year: ''\n        }\n      });\n    };\n\n    this.add = item => {\n      const idx = this.state.data.findIndex(el => el.id === item.id);\n\n      if (idx === -1 && item.title !== '' && item.year !== '') {\n        const newItem = this.createItem(item);\n        this.setState(({\n          data\n        }) => {\n          const newData = [...data, newItem];\n          return {\n            data: newData\n          };\n        });\n      } else {\n        const findItem = this.state.data.filter(el => el.id === item.id);\n        const newData = this.state.data;\n        findItem[0].title = item.title;\n        this.setState({\n          newData\n        });\n        console.log(this.state);\n      }\n    };\n\n    this.createItem = item => {\n      return {\n        id: id_count++,\n        title: item.title,\n        year: item.year\n      };\n    };\n\n    this.del = id => {\n      this.setState(({\n        data\n      }) => {\n        const idx = data.findIndex(el => el.id === id);\n        const newArray = [...data.slice(0, idx), ...data.slice(idx + 1)];\n        return {\n          data: newArray\n        };\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        tern: e.target.value\n      });\n    };\n\n    this.edit = id => {\n      const findItem = this.state.data.filter(item => item.id === id);\n      this.setState({\n        itemModal: findItem[0],\n        show: true\n      });\n    };\n\n    this.close = () => {\n      this.setState({\n        show: false\n      });\n    };\n  }\n\n  search(items, tern) {\n    if (tern.length === 0) {\n      return items;\n    }\n\n    return items.filter(item => {\n      return item.title.toLowerCase().indexOf(tern.toLowerCase()) > -1;\n    });\n  }\n\n  render() {\n    const {\n      data,\n      columns,\n      tern,\n      show,\n      itemModal\n    } = this.state;\n    const visibalItems = this.search(data, tern);\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"mr-2\",\n      onClick: this.openMod,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    }, \"add\"), /*#__PURE__*/React.createElement(FormControl, {\n      placeholder: \"\\u043F\\u043E\\u0438\\u0441\\u043A\",\n      value: tern,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(DataTable, {\n      columns: columns,\n      data: visibalItems,\n      pagination: true,\n      subHeader: true,\n      persistTableHead: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ModalRowAdd, {\n      show: show,\n      item: itemModal,\n      onClose: this.close,\n      onAdd: this.add,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n;","map":{"version":3,"sources":["F:/Application/dataTable/data-table/src/components/app/app.js"],"names":["React","Component","DataTable","Button","FormControl","ModalRowAdd","id_count","MyComponent","state","data","id","title","year","columns","name","selector","sortable","right","cell","edit","del","tern","show","itemModal","openMod","setState","add","item","idx","findIndex","el","newItem","createItem","newData","findItem","filter","console","log","newArray","slice","handleChange","e","target","value","close","search","items","length","toLowerCase","indexOf","render","visibalItems"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport DataTable from 'react-data-table-component';\r\nimport Button from 'react-bootstrap/Button';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport ModalRowAdd from '../modal-row-add/modal-row-add';\r\n\r\n\r\nlet id_count = 5;\r\n\r\nexport default class MyComponent extends Component {\r\n\r\n    state = {\r\n        data: [\r\n            { id: 1, title: 'Conan the Barbarian1', year: '1981' },\r\n            { id: 2, title: 'Conan the Barbarian2', year: '1982' },\r\n            { id: 3, title: 'Conan the Barbarian3', year: '1983' },\r\n            { id: 4, title: 'Привет как дела', year: 'vvvv' }\r\n        ],\r\n        columns: [\r\n            {\r\n                name: 'Title',\r\n                selector: 'title',\r\n                sortable: true,\r\n            },\r\n            {\r\n                name: 'Year',\r\n                selector: 'year',\r\n                sortable: true,\r\n                right: true,\r\n            },\r\n            {\r\n                name: 'buttons',\r\n                id: 'edit',\r\n                cell: ({ id }) =>\r\n                    <>\r\n                        <Button className='mr-2' onClick={() => this.edit(id)}>edit</Button>\r\n                        <Button onClick={() => this.del(id)}>del</Button>\r\n                    </>\r\n            },\r\n        ],\r\n        tern: '',\r\n        show: false,\r\n        itemModal: {}\r\n    };\r\n\r\n    // componentDidUpdate() {\r\n    //     console.log('asdasdasdasd');\r\n    //     return this.state.data;\r\n    // };\r\n\r\n    openMod = () => {\r\n        this.setState({\r\n            show: true,\r\n            itemModal: { id: '', title: '', year: '' }\r\n        });\r\n    };\r\n\r\n    add = (item) => {\r\n        const idx = this.state.data.findIndex((el) => el.id === item.id);\r\n\r\n        if (idx === -1 && item.title !== '' && item.year !== '') {\r\n            const newItem = this.createItem(item);\r\n            this.setState(({ data }) => {\r\n                const newData = [\r\n                    ...data,\r\n                    newItem\r\n                ];\r\n                return {\r\n                    data: newData\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const findItem = this.state.data.filter((el) => el.id === item.id);\r\n            const newData = this.state.data;\r\n            findItem[0].title = item.title;\r\n            this.setState({ newData })\r\n            console.log(this.state);\r\n        }\r\n    };\r\n\r\n    createItem = (item) => {\r\n        return {\r\n            id: id_count++,\r\n            title: item.title,\r\n            year: item.year\r\n        }\r\n    };\r\n\r\n    del = (id) => {\r\n        this.setState(({ data }) => {\r\n            const idx = data.findIndex((el) => el.id === id);\r\n\r\n            const newArray = [\r\n                ...data.slice(0, idx),\r\n                ...data.slice(idx + 1)\r\n            ];\r\n\r\n            return {\r\n                data: newArray\r\n            };\r\n        });\r\n    };\r\n\r\n    search(items, tern) {\r\n        if (tern.length === 0) {\r\n            return items;\r\n        }\r\n\r\n        return items.filter((item) => {\r\n            return item.title\r\n                .toLowerCase()\r\n                .indexOf(tern.toLowerCase()) > -1\r\n        });\r\n    };\r\n\r\n    handleChange = (e) => {\r\n        this.setState({\r\n            tern: e.target.value\r\n        });\r\n    };\r\n\r\n    edit = (id) => {\r\n        const findItem = this.state.data.filter((item) => item.id === id);\r\n\r\n        this.setState({\r\n            itemModal: findItem[0],\r\n            show: true\r\n        });\r\n    };\r\n\r\n    close = () => {\r\n        this.setState({\r\n            show: false\r\n        });\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n        const { data, columns, tern, show, itemModal } = this.state;\r\n        const visibalItems = this.search(data, tern);\r\n\r\n        return (\r\n            <>\r\n                <div className=\"d-flex\">\r\n                    <Button className='mr-2' onClick={this.openMod}>add</Button>\r\n                    <FormControl\r\n                        placeholder='поиск'\r\n                        value={tern}\r\n                        onChange={this.handleChange}\r\n                    />\r\n                </div>\r\n                <DataTable\r\n                    columns={columns}\r\n                    data={visibalItems}\r\n                    pagination\r\n                    subHeader\r\n                    persistTableHead\r\n                />\r\n                <ModalRowAdd show={show} item={itemModal} onClose={this.close} onAdd={this.add} />\r\n            </>\r\n        )\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}